$.fn.place=function(options){var defaults={top:20,left:20,margin:0,area:'window'};var options=$.extend(defaults,options);return this.each(function(){var _area;switch(options.area){case'document':_area=$(document);break;case'window':_area=$(window);break;default:_area=$(document);}
var _was_visible=$(this).is(':visible');var _previous_visibility=$(this).css('visibility');$(this).css({top:0,left:0,visibility:'hidden'}).show();var _new_top=options.top;var _new_left=options.left;if(parseInt(_new_left,10)+$(this).outerWidth()>_area.width()){_new_left=_area.width()-$(this).outerWidth(true)-parseInt(options.margin,10);}
if(parseInt(_new_top,10)+$(this).outerHeight()>_area.height()){_new_top=_area.height()-$(this).outerHeight(true)-parseInt(options.margin,10);}
if(_new_left<0){_new_left=0+parseInt(options.margin,10);}
if(_new_top<0){_new_top=0+parseInt(options.margin,10);}
$(this).css({top:_new_top,left:_new_left,visibility:_previous_visibility});if(_was_visible==false){$(this).hide();}});};